<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Might-Nights</title>
    <style>
        div table, th {
            border: 1px solid black;
            text-align: center;
        }
    </style>
    <script>

        var qtdConvidados = 0;
        //Função de cadastro
        function cadastrarSorteio() {
            var idade = document.getElementById("idade").value;
            var sexo = "";
            var sorteioElegivel = "";

            //Validação de idade inicial
            if (idade < 60) {
                alert("Por favor, corrigir o campo IDADE.");
                return;
            }

            //Validação e distribuição dos valores
            if (document.getElementById("feminino").checked) {
                sexo = "F";
            } else if (document.getElementById("masculino").checked) {
                sexo = "M";
            } else {
                alert("Por favor, selecione o SEXO.");
                return;
            }

            //Atribuição dos sorteios elegiveis
            if (sexo == "F" && idade >= 60 && idade <= 70) {
                sorteioElegivel += "S1 ";
            }
            if (idade >= 68 && idade <= 75) {
                sorteioElegivel += "S2 ";
            }
            if (sexo == "F" && idade >= 75) {
                sorteioElegivel += "S3 ";
            }
            if (sexo == "M" && idade >= 75) {
                sorteioElegivel += "S4 ";
            }

            if (sexo == "M" && idade >= 60 && idade < 68) {
                sorteioElegivel += "ST ";
            }

            document.getElementById("outputSorteio").innerHTML = sorteioElegivel;

            if (qtdConvidados >= 20) {
                alert("Lista cheia. Não foi possível cadastrar este convidado :(");
                return;
            }
            armazenarPessoa(idade, sexo, sorteioElegivel);
            qtdConvidados += 1;
            document.getElementById("qtdConvidados").innerHTML = qtdConvidados;
        }

        //Função parar zerar os radios sem precisar dar F5
        function zerarRadio() {
            document.getElementById("feminino").checked = false;
            document.getElementById("masculino").checked = false;
        }

        //Array de armazenamento dos convidados
        var arrayPessoas = [];

        //Função para armazenar (como o nome já diz, dãã)
        function armazenarPessoa(idade, sexo, sorteioElegivel) {
            var pessoa = { idadePessoa: idade, sexoPessoa: sexo, sorteioPessoa: sorteioElegivel }
            arrayPessoas.push(pessoa);
        }

        //Variável auxiliar para não imprimir lista diversas vezes
        var imprimiuLista = false;
        //Mostrar convidados 
        /*function mostrarConvidados() {

            if (imprimiuLista == false) {
                if (qtdConvidados < 20) {
                    alert("Ainda faltam " + (20 - qtdConvidados) + " para imprimir a lista de convidados!");
                    return;
                }

                for (var i = 0; i < arrayPessoas.length; i++) {
                    var tdNumero = document.createElement("td");
                    var tdIdade = document.createElement("td");
                    var tdSexo = document.createElement("td");
                    var tdSorteio = document.createElement("td");

                    tdNumero.textContent = (i + 1);
                    tdIdade.textContent = arrayPessoas[i].idadePessoa;
                    tdSexo.textContent = arrayPessoas[i].sexoPessoa;
                    tdSorteio.textContent = arrayPessoas[i].sorteioPessoa;

                    var tr = document.createElement("tr");
                    tr.appendChild(tdNumero);
                    tr.appendChild(tdIdade);
                    tr.appendChild(tdSexo);
                    tr.appendChild(tdSorteio);

                    document.getElementById("tableConvidados").appendChild(tr);
                }
                imprimiuLista = true;
            }
        }*/
    </script>
</head>

<body>
    <h4>Sorteio - Might-Nights</h4>
    <p>
        Prêmios e elegibilidade:<br>
        ·(Sorteio 1) 4 forno micro-ondas: para mulheres com idade entre 60 a 70 anos;<br>

        ·(Sorteio 2) 2 sofás modulares em couro sintético (5 peças): para pessoas com idade entre 68 a 75 anos;<br>

        ·(Sorteio 3) 1 TV de 60”: para mulheres com idade superior ou igual a 75 anos.<br>

        ·(Sorteio 4) 1 TV de 60”: para homens com idade superior ou igual a 75 anos.<br>
    </p>
    <table>
        <tr>
            <td>Idade:</td>
            <td><input id="idade" type="number" min="60" max="110" required></td>
        </tr>
        <tr>
            <td>Sexo:</td>
            <td><input type="radio" name="sexo" id="masculino" value="M"> Masculino<br>
                <input type="radio" name="sexo" id="feminino" value="F"> Feminino</td>
            <td><button onclick="zerarRadio()">Resetar radiobuttons</button></td>
        </tr>
    </table>
    <button onclick="cadastrarSorteio()">Cadastrar para Sorteio</button>

    <hr>

    <h3>Sorteio elegível: <span id="outputSorteio"></span></h3>
    <!-- <button onclick="mostrarConvidados()">Mostrar Convidados</button><br> -->
    <h3><b>Quantidade de Convidados:</b> <span id="qtdConvidados">0</span></h3>
    <!--<div>
        <table id="tableConvidados">
            <tr>
                <th>--Convidado--</th>
                <th>--Idade--</th>
                <th>--Sexo--</th>
                <th>--Sorteio Elegível--</th>
            </tr>
        </table>
    </div> -->
</body>

</html>